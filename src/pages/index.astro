---
import { client } from '../lib/sanity';
import type { Project } from '../lib/types';
import BaseLayout from '../layouts/BaseLayout.astro';
import ProjectCard from '../components/ProjectCard.astro';
import Footer from '../components/Footer.astro';
import HoverCursor from '../components/HoverCursor.astro';
import Navigation from '../components/Navigation.astro';

const query = `*[_type == "project"] |  order(title asc) | order(rating desc) {
  title,
  slug,
  projectType,
  thumbnail
}`;
const projects = await client.fetch<Project[]>(query);
---

<style lang="scss">
	@use '../styles/layouts/index';
</style>

<BaseLayout title="Sean Do â€” Portfolio">
	<Navigation />
	<header>
		<p class="text-intro">
			Sean Do <i>*pronounced dough*</i> is a <span class="projects-filter">graphic&nbsp;designer</span>, <span
				class="projects-filter">type&nbsp;designer</span
			> and <span class="projects-filter">web&nbsp;developer</span>. His practice often explores the intersection of
			print and digital environments, considering how type and editorial design adapt and translate across
			different&nbsp;mediums.
		</p>
	</header>
	<main class="projects">
		<h1>Works</h1>
		<div class="projects__grid">
			<HoverCursor text="(OPEN)" />

			{
				projects.map(project => (
					<ProjectCard
						title={project.title}
						slug={project.slug}
						projectType={project.projectType}
						thumbnail={project.thumbnail}
					/>
				))
			}
		</div>
	</main>
	<Footer />
</BaseLayout>
